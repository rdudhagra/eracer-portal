(this["webpackJsonperacer-portal"]=this["webpackJsonperacer-portal"]||[]).push([[0],{177:function(e,t){},249:function(e,t,n){},252:function(e,t){},259:function(e,t,n){"use strict";n.r(t);var o=n(296),r=n(291),a=n(2),c=n(104),i=n.n(c),s=n(23),l=n(284),j=n(41),d=n(281),b=(n(231),n(129)),u=n(292),p=n(294),O=n(136),x=n.n(O),f=n(264),h=(n(249),n(51)),y=n(206),g=n.n(y),v=n(298);function w(e,t){var n=Array.from(t);return n[t.findIndex((function(t){return t.key===e.key}))]=e,n}var m=n(94),k=n(13),S=function(e){var t=Object(f.c)("black","white");return Object(k.jsx)(m.b,{onMouseEnter:function(){e.onMap&&e.setWaypoints((function(t){return w(Object(j.a)(Object(j.a)({},e.waypoint),{},{active:!0}),t)}))},onMouseLeave:function(){e.onMap&&e.setWaypoints((function(t){return w(Object(j.a)(Object(j.a)({},e.waypoint),{},{active:!1}),t)}))},size:e.onMap?35:30,style:{translate:e.onMap?"-50% -100%":"",color:"var(--chakra-colors-".concat(e.waypoint.active?t:e.waypoint.fullStop?"red-500":"teal-400",")"),zIndex:1}})};S.defaultProps={onMap:!1,active:!1,fullStop:!1};var C=n(174);x.a.workerClass=n(251).default;var W=function(e){var t=Object(f.c)("light","dark"),n=Object(a.useRef)(null),o=function(){var e=Object(a.useState)({width:void 0,height:void 0}),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),r=o.width,c=o.height,i=Object(a.useState)({}),l=Object(s.a)(i,2),j=l[0],O=l[1],x=function(e){return new p.a({id:"drive-path-layer",data:[{path:e,name:""}],rounded:!0,pickable:!1,widthScale:2,widthMinPixels:2,widthMaxPixels:6,getColor:[11,197,234]})},y=Object(a.useCallback)((function(t){e.setWaypoints((function(e){var n,o,r,a,c=(r=t.coordinate[0],a=t.coordinate[1],n={key:Object(v.a)(),lat:a,lon:r,fullStop:!0,active:!1},o=e,[].concat(Object(h.a)(o),[n])),i=new C.CurveInterpolator(c.map((function(e){return[e.lon,e.lat]})),{tension:.5}).getPoints(1e3);return O({points:i,path:x(i)}),c}))}),[]);return Object(k.jsx)(d.a,{flex:1,display:"block",ref:n,children:Object(k.jsxs)(u.a,{initialViewState:{latitude:0,longitude:0,zoom:18,bearing:0,pitch:0},controller:{touchRotate:!0,touchZoom:!0},onClick:y,layers:[j.path],ContextProvider:b.d.Provider,children:[Object(k.jsx)(b.c,{mapStyle:"mapbox://styles/mapbox/".concat(t,"-v10"),width:r,height:c,attributionControl:!1,children:Object(k.jsx)(b.a,{style:{padding:10,top:70},fitBoundsOptions:{maxZoom:18},auto:!0})}),Object(k.jsx)(M,{waypoints:e.waypoints,setWaypoints:e.setWaypoints,setPolyline:O,makeDrivePathLayer:x})]})})},M=function(e){var t=Object(a.useMemo)((function(){return e.waypoints.map((function(t){return Object(k.jsx)(b.b,{longitude:t.lon,latitude:t.lat,draggable:!0,onDragEnd:function(n){e.setWaypoints((function(o){var r=w(Object(j.a)(Object(j.a)({},t),{},{lat:n.lngLat[1],lon:n.lngLat[0]}),o),a=new C.CurveInterpolator(r.map((function(e){return[e.lon,e.lat]})),{tension:.5}).getPoints(1e3);return e.setPolyline({points:a,path:e.makeDrivePathLayer(a)}),r}))},children:Object(k.jsx)(S,{waypoint:t,setWaypoints:e.setWaypoints,onMap:!0})},t.key)}))}),[e]);return Object(k.jsx)(k.Fragment,{children:t})},z=n(285),P=n(286),E=n(299),L=n(287),I=n(288),D=n(297),H=n(289),A=n(216),F=n(282),R=function(e){var t=Object(f.b)().toggleColorMode,n=Object(f.c)("dark","light"),o=Object(f.c)(m.c,m.d),r=Object(f.c)("gray.100","gray.700"),a=Object(f.c)("gray.700","gray.100"),c=Object(f.c)("gray.700","gray.200");return Object(k.jsx)(F.a,Object(j.a)({size:"md",fontSize:"lg",variant:"ghost",color:r,bg:a,_hover:{bg:c},marginLeft:"2",onClick:t,icon:Object(k.jsx)(o,{}),"aria-label":"Switch to ".concat(n," mode")},e))},_=function(){var e=Object(f.c)("gray.800","white"),t=Object(f.c)("gray.700","gray.100"),n=Object(f.c)("gray.100","gray.800"),o=Object(f.c)("gray.400","gray.800"),r=Object(f.c)("gray.500","gray.600");return Object(k.jsxs)(l.a,{w:"100%",bg:e,px:4,py:3,shadow:"dark-lg",pointerEvents:"auto",children:[Object(k.jsx)(z.a,{fontSize:"3xl",ps:2,color:n,children:"ERacer Portal"}),Object(k.jsx)(P.a,{}),Object(k.jsxs)(E.a,{width:450,ms:4,borderColor:o,children:[Object(k.jsx)(L.a,{pointerEvents:"none",fontSize:"1em",color:n,bg:t,children:[Object(k.jsx)(m.a,{},"eracer-globeicon"),Object(k.jsx)(I.a,{ms:3,children:"ws://"},"earcer-wsheader")],borderColor:o}),Object(k.jsx)(D.a,{placeholder:"Websocket Address",_placeholder:{color:r},color:n,borderColor:o,_hover:{borderColor:r}}),Object(k.jsx)(H.a,{w:"fit-content",borderColor:o,children:Object(k.jsx)(A.a,{size:"xs",m:2,colorScheme:"teal",children:"Connect"})})]}),Object(k.jsx)(R,{ms:4})]})},B=n(209),J=n(158),Z=function(e){var t=Object(f.c)(".700",".400"),n=e.setWaypoints,o=Object(a.useCallback)((function(e){var t;void 0!==(null===(t=e.destination)||void 0===t?void 0:t.index)&&n((function(t){var n,o,r,a;return o=e.source.index,r=null===(n=e.destination)||void 0===n?void 0:n.index,a=t,g()(a,o,r)}))}),[n]);return Object(k.jsx)(J.a,{onDragEnd:o,children:Object(k.jsx)(d.a,{h:"100%",style:{overflow:"auto"},children:Object(k.jsx)(J.c,{droppableId:"eracer-waypoints",children:function(n,o){return Object(k.jsxs)(d.a,Object(j.a)(Object(j.a)({ref:n.innerRef},n.droppableProps),{},{children:[e.waypoints.map((function(n,o){return Object(k.jsx)(J.b,{draggableId:n.key,index:o,children:function(o,r){return Object(k.jsx)(d.a,Object(j.a)(Object(j.a)(Object(j.a)({ref:o.innerRef},o.draggableProps),o.dragHandleProps),{},{children:Object(k.jsxs)(l.a,{py:3,borderY:"0.5px solid gray",style:{borderCollapse:"collapse"},alignItems:"center",flexDirection:"row",onMouseEnter:function(){e.setWaypoints((function(e){return w(Object(j.a)(Object(j.a)({},n),{},{active:!0}),e)}))},onMouseLeave:function(){e.setWaypoints((function(e){return w(Object(j.a)(Object(j.a)({},n),{},{active:!1}),e)}))},pointerEvents:"fill",children:[Object(k.jsx)(d.a,{px:3,children:Object(k.jsx)(B.a,{size:20,cursor:"pointer",onClick:function(){return e.setWaypoints((function(e){return function(e,t){var n=Array.from(t);return n.splice(t.findIndex((function(t){return t.key===e.key})),1),n}(n,e)}))}})}),Object(k.jsx)(d.a,{px:2,pl:4,children:Object(k.jsx)(S,{waypoint:n,setWaypoints:e.setWaypoints})}),Object(k.jsxs)(d.a,{px:2,fontSize:"xs",w:"100%",children:["Lat: ",n.lat.toFixed(6),Object(k.jsx)("br",{}),"Lon: ",n.lon.toFixed(6)]}),Object(k.jsx)(d.a,{px:4,textAlign:"right",fontSize:"md",onClick:function(){e.setWaypoints((function(e){return w(Object(j.a)(Object(j.a)({},n),{},{fullStop:!n.fullStop}),e)}))},children:Object(k.jsx)(I.a,{whiteSpace:"nowrap",textColor:"".concat(n.fullStop?"red":"teal").concat(t),cursor:"pointer",children:n.fullStop?"Full Stop":"Coast"})})]},n.key)}))}},n.key)})),n.placeholder]}))}})})})},V=function(e){var t=Object(f.c)("gray.300","gray.700"),n=Object(f.c)("gray.400","gray.600"),o=Object(f.c)(".300",".400");return Object(k.jsx)(l.a,{shadow:"dark-lg",rounded:"lg",flex:1,alignSelf:"flex-end",w:"30%",minW:300,maxW:450,m:4,overflow:"hidden",bg:t,pointerEvents:"auto",flexDirection:"column",children:Object(k.jsxs)(l.a,{bg:n,h:300,m:5,rounded:"lg",flexDirection:"column",overflow:"hidden",children:[Object(k.jsx)(l.a,{bg:"red".concat(o),w:"100%",py:2,px:4,children:Object(k.jsx)(z.a,{fontSize:"2xl",children:"Waypoints"})}),Object(k.jsx)(d.a,{flex:1,style:{overflow:"auto"},children:Object(k.jsx)(Z,{waypoints:e.waypoints,setWaypoints:e.setWaypoints})})]})})},Y=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(l.a,{minH:"100vh",maxH:"100vh",children:Object(k.jsx)(W,{waypoints:n,setWaypoints:o})}),Object(k.jsxs)(l.a,{position:"absolute",top:0,left:0,minH:"100vh",maxH:"100vh",minW:"100vw",maxW:"100vw",direction:"column",textAlign:"center",fontSize:"xl",pointerEvents:"none",children:[Object(k.jsx)(_,{}),Object(k.jsx)(V,{waypoints:n,setWaypoints:o})]})]})},q=n(290),G=Object(q.a)({config:{initialColorMode:"light",useSystemColorMode:!0}});i.a.render(Object(k.jsx)(a.StrictMode,{children:Object(k.jsxs)(o.a,{theme:G,children:[Object(k.jsx)(r.a,{initialColorMode:G.config.initialColorMode}),Object(k.jsx)(Y,{})]})}),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.f9af7c13.chunk.js.map