(this["webpackJsonperacer-portal"]=this["webpackJsonperacer-portal"]||[]).push([[0],{178:function(e,t){},249:function(e,t,n){},252:function(e,t){},259:function(e,t,n){"use strict";n.r(t);var o=n(296),a=n(291),r=n(2),i=n(104),c=n.n(i),l=n(23),s=n(284),j=n(38),b=n(281),d=(n(231),n(131)),u=n(292),p=n(294),O=n(138),y=n.n(O),x=n(264),f=(n(249),n(51)),h=n(207),g=n.n(h),v=n(298);function w(e,t){var n=Array.from(t);return n[t.findIndex((function(t){return t.key===e.key}))]=e,n}var m=n(95),S=n(12),k=function(e){var t=Object(x.c)("black","white");return Object(S.jsx)(m.b,{onMouseEnter:function(){e.onMap&&e.setWaypoints((function(t){return w(Object(j.a)(Object(j.a)({},e.waypoint),{},{active:!0}),t)}))},onMouseLeave:function(){e.onMap&&e.setWaypoints((function(t){return w(Object(j.a)(Object(j.a)({},e.waypoint),{},{active:!1}),t)}))},size:e.onMap?35:30,style:{translate:e.onMap?"-50% -100%":"",color:"var(--chakra-colors-".concat(e.waypoint.active?t:e.waypoint.fullStop?"red-500":"teal-400",")"),zIndex:1}})};k.defaultProps={onMap:!1,active:!1,fullStop:!1};var C=n(110);y.a.workerClass=n(251).default;var W=.9,P=1e3,M=function(e){return new p.a({id:"drive-path-layer",data:[{path:e,name:""}],rounded:!0,pickable:!1,widthScale:2,widthMinPixels:2,widthMaxPixels:6,getColor:[11,197,234]})},z=function(e){var t=Object(x.c)("light","dark"),n=Object(r.useRef)(null),o=function(){var e=Object(r.useState)({width:void 0,height:void 0}),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),a=o.width,i=o.height,c=Object(r.useCallback)((function(t){e.setWaypoints((function(n){var o,a,r,i,c=(r=t.coordinate[0],i=t.coordinate[1],o={key:Object(v.a)(),lat:i,lon:r,fullStop:!0,active:!1},a=n,[].concat(Object(f.a)(a),[o])),l=new C.CurveInterpolator(c.map((function(e){return[e.lon,e.lat]})),{tension:W}).getPoints(P);return e.setPolyline({points:l,path:M(l)}),c}))}),[]);return Object(S.jsx)(b.a,{flex:1,display:"block",ref:n,children:Object(S.jsxs)(u.a,{initialViewState:{latitude:0,longitude:0,zoom:18,bearing:0,pitch:0},controller:{touchRotate:!0,touchZoom:!0},onClick:c,layers:[e.polyline.path],ContextProvider:d.d.Provider,children:[Object(S.jsx)(d.c,{mapStyle:e.satellite?"mapbox://styles/mapbox/satellite-streets-v11":"mapbox://styles/mapbox/".concat(t,"-v10"),width:a,height:i,attributionControl:!1}),Object(S.jsx)(E,{waypoints:e.waypoints,setWaypoints:e.setWaypoints,setPolyline:e.setPolyline,makeDrivePathLayer:M}),Object(S.jsx)(d.a,{style:{padding:10,top:70},fitBoundsOptions:{maxZoom:18},auto:!0})]})})},E=function(e){var t=Object(r.useMemo)((function(){return e.waypoints.map((function(t){return Object(S.jsx)(d.b,{longitude:t.lon,latitude:t.lat,draggable:!0,onDragEnd:function(n){e.setWaypoints((function(o){var a=w(Object(j.a)(Object(j.a)({},t),{},{lat:n.lngLat[1],lon:n.lngLat[0]}),o),r=new C.CurveInterpolator(a.map((function(e){return[e.lon,e.lat]})),{tension:W}).getPoints(P);return e.setPolyline({points:r,path:e.makeDrivePathLayer(r)}),a}))},children:Object(S.jsx)(k,{waypoint:t,setWaypoints:e.setWaypoints,onMap:!0})},t.key)}))}),[e]);return Object(S.jsx)(S.Fragment,{children:t})},L=n(285),I=n(286),D=n(299),H=n(287),A=n(288),F=n(297),R=n(289),_=n(216),B=n(282),J=function(e){var t=Object(x.b)().toggleColorMode,n=Object(x.c)("dark","light"),o=Object(x.c)(m.c,m.d),a=Object(x.c)("gray.100","gray.700"),r=Object(x.c)("gray.700","gray.100"),i=Object(x.c)("gray.700","gray.200");return Object(S.jsx)(B.a,Object(j.a)({size:"md",fontSize:"lg",variant:"ghost",color:a,bg:r,_hover:{bg:i},marginLeft:"2",onClick:t,icon:Object(S.jsx)(o,{}),"aria-label":"Switch to ".concat(n," mode")},e))},Z=n(127),V=function(e){var t=Object(x.c)("dark","light"),n=e.satellite?Z.b:Z.c,o=Object(x.c)("gray.100","gray.700"),a=Object(x.c)("gray.700","gray.100"),r=Object(x.c)("gray.700","gray.200");return Object(S.jsx)(B.a,Object(j.a)({size:"md",fontSize:"lg",variant:"ghost",color:o,bg:a,_hover:{bg:r},marginLeft:"2",onClick:function(){return e.setSatellite(!e.satellite)},icon:Object(S.jsx)(n,{}),"aria-label":"Switch to ".concat(t," mode")},e))},Y=function(e){var t=Object(x.c)("gray.800","white"),n=Object(x.c)("gray.700","gray.100"),o=Object(x.c)("gray.100","gray.800"),a=Object(x.c)("gray.400","gray.800"),r=Object(x.c)("gray.500","gray.600");return Object(S.jsxs)(s.a,{w:"100%",bg:t,px:4,py:3,shadow:"dark-lg",pointerEvents:"auto",children:[Object(S.jsx)(L.a,{fontSize:"3xl",ps:2,color:o,children:"ERacer Portal"}),Object(S.jsx)(I.a,{}),Object(S.jsxs)(D.a,{width:450,ms:4,borderColor:a,children:[Object(S.jsx)(H.a,{pointerEvents:"none",fontSize:"1em",color:o,bg:n,children:[Object(S.jsx)(m.a,{},"eracer-globeicon"),Object(S.jsx)(A.a,{ms:3,children:"ws://"},"earcer-wsheader")],borderColor:a}),Object(S.jsx)(F.a,{placeholder:"Websocket Address",_placeholder:{color:r},color:o,borderColor:a,_hover:{borderColor:r}}),Object(S.jsx)(R.a,{w:"fit-content",borderColor:a,children:Object(S.jsx)(_.a,{size:"xs",m:2,colorScheme:"teal",children:"Connect"})})]}),Object(S.jsx)(J,{ms:4}),Object(S.jsx)(V,{ms:4,satellite:e.satellite,setSatellite:e.setSatellite})]})},q=n(160),G=function(e){var t=Object(x.c)(".700",".400"),n=e.setWaypoints,o=Object(r.useCallback)((function(t){var o;void 0!==(null===(o=t.destination)||void 0===o?void 0:o.index)&&n((function(n){var o,a,r,i,c=(a=t.source.index,r=null===(o=t.destination)||void 0===o?void 0:o.index,i=n,g()(i,a,r)),l=new C.CurveInterpolator(c.map((function(e){return[e.lon,e.lat]})),{tension:W}).getPoints(P);return e.setPolyline({points:l,path:M(l)}),c}))}),[n]);return Object(S.jsx)(q.a,{onDragEnd:o,children:Object(S.jsx)(b.a,{h:"100%",style:{overflow:"auto"},children:Object(S.jsx)(q.c,{droppableId:"eracer-waypoints",children:function(n,o){return Object(S.jsxs)(b.a,Object(j.a)(Object(j.a)({ref:n.innerRef},n.droppableProps),{},{children:[e.waypoints.map((function(n,o){return Object(S.jsx)(q.b,{draggableId:n.key,index:o,children:function(o,a){return Object(S.jsx)(b.a,Object(j.a)(Object(j.a)(Object(j.a)({ref:o.innerRef},o.draggableProps),o.dragHandleProps),{},{children:Object(S.jsxs)(s.a,{py:3,borderY:"0.5px solid gray",style:{borderCollapse:"collapse"},alignItems:"center",flexDirection:"row",onMouseEnter:function(){e.setWaypoints((function(e){return w(Object(j.a)(Object(j.a)({},n),{},{active:!0}),e)}))},onMouseLeave:function(){e.setWaypoints((function(e){return w(Object(j.a)(Object(j.a)({},n),{},{active:!1}),e)}))},pointerEvents:"fill",children:[Object(S.jsx)(b.a,{px:3,children:Object(S.jsx)(Z.a,{size:20,cursor:"pointer",onClick:function(){return e.setWaypoints((function(t){var o=function(e,t){var n=Array.from(t);return n.splice(t.findIndex((function(t){return t.key===e.key})),1),n}(n,t),a=o.length?new C.CurveInterpolator(o.map((function(e){return[e.lon,e.lat]})),{tension:W}).getPoints(P):[];return e.setPolyline({points:a,path:M(a)}),o}))}})}),Object(S.jsx)(b.a,{px:2,pl:4,children:Object(S.jsx)(k,{waypoint:n,setWaypoints:e.setWaypoints})}),Object(S.jsxs)(b.a,{px:2,fontSize:"xs",w:"100%",children:["Lat: ",n.lat.toFixed(6),Object(S.jsx)("br",{}),"Lon: ",n.lon.toFixed(6)]}),Object(S.jsx)(b.a,{px:4,textAlign:"right",fontSize:"md",onClick:function(){e.setWaypoints((function(e){return w(Object(j.a)(Object(j.a)({},n),{},{fullStop:!n.fullStop}),e)}))},children:Object(S.jsx)(A.a,{whiteSpace:"nowrap",textColor:"".concat(n.fullStop?"red":"teal").concat(t),cursor:"pointer",children:n.fullStop?"Full Stop":"Coast"})})]},n.key)}))}},n.key)})),n.placeholder]}))}})})})},K=function(e){var t=Object(x.c)("gray.300","gray.700"),n=Object(x.c)("gray.400","gray.600"),o=Object(x.c)(".300",".400");return Object(S.jsx)(s.a,{shadow:"dark-lg",rounded:"lg",flex:1,alignSelf:"flex-end",w:"30%",minW:300,maxW:450,m:4,overflow:"hidden",bg:t,pointerEvents:"auto",flexDirection:"column",children:Object(S.jsxs)(s.a,{bg:n,h:300,m:5,rounded:"lg",flexDirection:"column",overflow:"hidden",children:[Object(S.jsx)(s.a,{bg:"red".concat(o),w:"100%",py:2,px:4,children:Object(S.jsx)(L.a,{fontSize:"2xl",children:"Waypoints"})}),Object(S.jsx)(b.a,{flex:1,style:{overflow:"auto"},children:Object(S.jsx)(G,{waypoints:e.waypoints,setWaypoints:e.setWaypoints,polyline:e.polyline,setPolyline:e.setPolyline})})]})})},N=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)({}),i=Object(l.a)(a,2),c=i[0],j=i[1],b=Object(r.useState)(!1),d=Object(l.a)(b,2),u=d[0],p=d[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(s.a,{minH:"100vh",maxH:"100vh",children:Object(S.jsx)(z,{satellite:u,waypoints:n,setWaypoints:o,polyline:c,setPolyline:j})}),Object(S.jsxs)(s.a,{position:"absolute",top:0,left:0,minH:"100vh",maxH:"100vh",minW:"100vw",maxW:"100vw",direction:"column",textAlign:"center",fontSize:"xl",pointerEvents:"none",children:[Object(S.jsx)(Y,{satellite:u,setSatellite:p}),Object(S.jsx)(K,{waypoints:n,setWaypoints:o,polyline:c,setPolyline:j})]})]})},Q=n(290),T=Object(Q.a)({config:{initialColorMode:"light",useSystemColorMode:!0}});c.a.render(Object(S.jsx)(r.StrictMode,{children:Object(S.jsxs)(o.a,{theme:T,children:[Object(S.jsx)(a.a,{initialColorMode:T.config.initialColorMode}),Object(S.jsx)(N,{})]})}),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.c93bd85b.chunk.js.map